{% extends 'admin/base.html.twig' %}
{% block title %}Pedidos{% endblock %}
{% block body %}

<h1>Pedidos</h1>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>ID</th>
            <th>Cliente</th>
            <th>Total</th>
            <th>Estado</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for pedido in pedidos %}
        <tr>
            <td>{{ pedido.id }}</td>
            <td>{{ pedido.usuario.email }}</td>
            <td>{{ pedido.total }} â‚¬</td>
            <td>
                {% if pedido.estado == 'pagado' %}
                    <span class="badge bg-success">Pagado</span>
                {% elseif pedido.estado == 'pendiente_pago' %}
                    <span class="badge bg-warning text-dark">Pendiente de pago</span>
                {% else %}
                    <span class="badge bg-secondary">{{ pedido.estado }}</span>
                {% endif %}
            </td>
            <td>
                <a href="{{ path('admin_pedidos_ver', {'id': pedido.id}) }}" class="btn btn-primary btn-sm">
                    Ver
                </a>

                {% if pedido.estado == 'pendiente_pago' %}
                    <a href="{{ path('admin_pedidos_cambiar_estado', {'id': pedido.id, 'estado': 'pagado'}) }}"
                       class="btn btn-success btn-sm">
                        Marcar pagado
                    </a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
